function clearItem(){localStorage.removeItem("blogbg"),localStorage.removeItem("universe"),localStorage.removeItem("blur"),localStorage.removeItem("fpson"),localStorage.removeItem("transNum"),localStorage.removeItem("bing"),localStorage.removeItem("blurRad"),localStorage.removeItem("font"),localStorage.removeItem("themeColor"),localStorage.removeItem("rs"),localStorage.removeItem("mouse")}function setFont(e){localStorage.setItem("font",e),"default"==e?(document.documentElement.style.setProperty("--global-font","-apple-system"),document.body.style.fontFamily="-apple-system, Consolas_1, BlinkMacSystemFont, 'Segoe UI' , 'Helvetica Neue' , Lato, Roboto, 'PingFang SC' , 'Microsoft JhengHei' , 'Microsoft YaHei' , sans-serif"):(document.documentElement.style.setProperty("--global-font",e),document.body.style.fontFamily="var(--global-font),-apple-system, IBM Plex Mono ,monosapce,'微软雅黑', sans-serif");try{setFontBorder()}catch(e){}}function setFontBorder(){var e="swf_"+localStorage.getItem("font");document.getElementById(e).style.border="2px solid var(--theme-color)",Array.prototype.forEach.call(document.getElementsByClassName("swf"),(function(t){t.id!=e&&(t.style.border="2px solid var(--border-color)")}))}function reload(){window.location.reload()}null==localStorage.getItem("reset_2")&&(localStorage.setItem("reset_2","1"),localStorage.removeItem("reset_1"),clearItem(),setTimeout((function(){new Vue({data:function(){this.$notify({title:"Tips",message:" (｡･∀･)ﾉﾞ祝您浏览愉快！",position:"top-left",offset:50,showClose:!0,type:"success",duration:8e3})}})}),1500)),null==localStorage.getItem("font")&&localStorage.setItem("font","comic"),setFont(localStorage.getItem("font"));var defineColor=localStorage.getItem("blogbg")&&"#"==localStorage.getItem("blogbg").charAt(0)?localStorage.getItem("blogbg"):"#F4D88A";function changeBgColor(){changeBg(document.querySelector("#colors").value)}if(null!=localStorage.getItem("blogbg")){let e=localStorage.getItem("blogbg");document.getElementById("defineBg").innerText=`:root{\n    --default-bg: ${e};\n    --darkmode-bg: ${e};\n    --mobileday-bg: ${e};\n    --mobilenight-bg: ${e};\n  }`,changeBg(e)}else document.getElementById("defineBg").innerText=":root{\n    --default-bg: url();\n    --darkmode-bg:url();\n    --mobileday-bg: url();\n    --mobilenight-bg: url();\n  }";function changeBg(e){let t=document.getElementById("web_bg");"#"==e.charAt(0)?(t.style.backgroundColor=e,t.style.backgroundImage="none",defineColor=e):(t.style.backgroundImage=e,defineColor="#F4D88A"),localStorage.setItem("blogbg",e),localStorage.setItem("bing","false"),document.getElementById("bingSet")&&(document.getElementById("bingSet").checked=!1)}function getPicture(){debounce(getPicture_,300)}function getPicture_(){let e=document.getElementById("web_bg");checkImgExists(document.getElementById("pic-link").value).then((()=>{var t="url("+document.getElementById("pic-link").value+")";e.style.backgroundImage=t,localStorage.setItem("blogbg",t),localStorage.setItem("bing","false"),document.getElementById("bingSet")&&(document.getElementById("bingSet").checked=!1),new Vue({data:function(){this.$notify({title:"可以啦🍨",message:"切换自定义背景成功！",position:"top-left",offset:50,showClose:!0,type:"success",duration:5e3})}})})).catch((()=>{new Vue({data:function(){this.$notify({title:"链接不对🤣",message:"请输入有效的图片链接！",position:"top-left",offset:50,showClose:!0,type:"warning",duration:5e3})}})}))}function checkImgExists(e){return new Promise((function(t,o){var n=new Image;n.src=e,n.onload=function(e){t(e)},n.onerror=function(e){o(e)}}))}var winbox="";function createWinbox(){let e=document.createElement("div");document.body.appendChild(e),winbox=WinBox({id:"meihuaBox",index:99,title:"美化设置",x:"left",y:"center",minwidth:"300px",height:"60%",background:"var(--theme-color)",onmaximize:()=>{e.innerHTML="<style>body::-webkit-scrollbar {display: none;} div#meihuaBox {width: 100% !important;}</style>"},onrestore:()=>{e.innerHTML=""}}),winResize(),window.addEventListener("resize",winResize),winbox.body.innerHTML=`\n<div class="settings" style="display: block;">\n<div id="article-container" style="padding:12px;">\n<br>\n<p><center><button onclick="reset()" style="background: #619ac3;display:block;width:40%;padding:15px 0;border-radius:15px;color:white;font-size:1.1em;"><i class="fa-solid fa-arrows-rotate"></i>&nbsp;恢复默认设置</button></p></center>\n\n<h2><center>字体设置</center></h2>\n<p id="swfs">\n<a class="swf"  id="swf_comic"  href="javascript:;" rel="noopener external nofollow" style="font-family:'comic'!important;color:black" onclick="setFont('comic')">漫画体</a>\n<a class="swf"  id="swf_FJY"  href="javascript:;" rel="noopener external nofollow" style="font-family:'FJY'!important;color:black" onclick="setFont('FJY')">也字工厂弗吉亚体</a>\n<a class="swf"  id="swf_default" href="javascript:;" rel="noopener external nofollow" style="font-family:-apple-system, IBM Plex Mono ,monosapce,'微软雅黑', sans-serif;!important;color:black" onclick="setFont('default')">系统默认</a>\n\n</p>\n\n<hr>\n\n<h2><center>背景设置</center></h2>\n<center><button onclick="resetBg()" style="background: #619ac3;display:block;width:35%;padding:15px 0;border-radius:30px;color:white;"><i class="fa-solid fa-arrows-rotate"></i>&nbsp;恢复默认背景</button></center>\n\n<h3>二次元</h3>\n<div class="bgbox">\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/ai)" class="imgbox" onclick="changeBg('url(https://t.mwm.moe/ai)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/ys)" class="imgbox" onclick="changeBg('url(https://t.mwm.moe/ys)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/ycy)" class="imgbox" onclick="changeBg('url(https://t.mwm.moe/ycy)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/pc)" class="imgbox" onclick="changeBg('url(https://t.mwm.moe/pc)')"></a>\n</div>\n\n<hr>\n\n<h3>渐变色</h3>\n<div class="bgbox">\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)" onclick="changeBg('linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)" onclick="changeBg('linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)" onclick="changeBg('linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" class="box" style="background: linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)" onclick="changeBg('linear-gradient(to top, #355c7d, #6c5b7b, #c06c84)')"></a>\n</div>\n\n<hr>\n\n<h3>纯色</h3>\n<div class="bgbox">\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" class="box" style="background: #f7eff5" onclick="changeBg('#f7eff5')"></a>  \n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" class="box" style="background: #e9ccd3" onclick="changeBg('#e9ccd3')"></a>  \n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" class="box" style="background: #619ac3" onclick="changeBg('#619ac3')"></a>  \n<input type="color" id="colors" href="javascript:;" rel="noopener external nofollow" class="box" autocomplete="on" value="${defineColor}" oninput="changeBgColor()"></input>\n</div>\n\n<hr>\n\n<h3>适配手机</h3>\n\n<div class="bgbox">\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/moemp)" class="pimgbox" onclick="changeBg('url(https://t.mwm.moe/moemp)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/mp)" class="pimgbox" onclick="changeBg('url(https://t.mwm.moe/mp)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/ysmp)" class="pimgbox" onclick="changeBg('url(https://t.mwm.moe/ysmp)')"></a>\n<a style="margin-right:3px" href="javascript:;" rel="noopener external nofollow" style="background-image:url(https://t.mwm.moe/aimp)" class="pimgbox" onclick="changeBg('url(https://t.mwm.moe/aimp)')"></a>\n</div>\n\n<hr>\n\n<h3> 自定义背景</h3>\n<div class="bgbox">\n<p><center>\n<input type="text" id="pic-link" size="50%" maxlength="1000" placeholder="请输入有效的图片链接，如 https://source.fomal.cc/img/home_bg.webp">\n</center></p>\n\n<p><center>\n<button type="button" onclick="getPicture()" style="background:var(--theme-color);">🌈切换背景🌈</button>\n</center></p>\n<hr>\n<br>\n<center><div style="font-size:1.2em;color:var(--theme-color);font-weight:bold;">------ ( •̀ ω •́ )y 到底啦 ------</div></center>\n\n\n</div>\n\n</div>\n\n`,$("#"+localStorage.getItem("themeColor")).attr("checked",!0),1==localStorage.getItem("blur")?document.getElementById("blur").checked=!0:document.getElementById("blur").checked=!1,"block"==localStorage.getItem("universe")?document.getElementById("universeSet").checked=!0:"none"==localStorage.getItem("universe")&&(document.getElementById("universeSet").checked=!1),"1"==localStorage.getItem("fpson")?document.getElementById("fpson").checked=!0:document.getElementById("fpson").checked=!1,"block"==localStorage.getItem("rs")?document.getElementById("rightSideSet").checked=!0:"none"==localStorage.getItem("rs")&&(document.getElementById("rightSideSet").checked=!1),"true"==localStorage.getItem("bing")?document.getElementById("bingSet").checked=!0:document.getElementById("bingSet").checked=!1,"true"==localStorage.getItem("light")?document.getElementById("lightSet").checked=!0:document.getElementById("lightSet").checked=!1,setFontBorder()}function resetBg(){localStorage.removeItem("blogbg"),reload()}function reset(){clearItem(),reload()}function winResize(){try{var e=document.documentElement.clientWidth;e<=768?winbox.resize(.95*e+"px","90%").move("center","center"):winbox.resize(.6*e+"px","70%").move("center","center")}catch(e){}}function toggleWinbox(){document.querySelector("#meihuaBox")?winbox.toggleClass("hide"):createWinbox()}