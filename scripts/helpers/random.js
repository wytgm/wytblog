hexo.extend.generator.register("random",(function(n){const t=hexo.config.random||{},o=hexo.theme.config,e=o.footer.list.randomFriends||0,r=[],a=n.data.link||[];for(const t of n.posts.data)!1!==t.random&&r.push(t.path);const i=[];a.forEach((n=>{n.link_list.forEach((n=>{i.push(n)}))}));let s=`var posts=${JSON.stringify(r)};function toRandomPost(){pjax.loadUrl('/'+posts[Math.floor(Math.random() * posts.length)]);};`;return o.footer.list.enable&&e>0&&(s+=`var friend_link_list=${JSON.stringify(i)};\n    var refreshNum = 1;\n    function addFriendLinksInFooter() {\n      var footerRandomFriendsBtn = document.getElementById("footer-random-friends-btn");\n      if(!footerRandomFriendsBtn) return;\n      footerRandomFriendsBtn.style.opacity = "0.2";\n      footerRandomFriendsBtn.style.transitionDuration = "0.3s";\n      footerRandomFriendsBtn.style.transform = "rotate(" + 360 * refreshNum++ + "deg)";\n      const finalLinkList = [];\n  \n      let count = 0;\n\n      while (friend_link_list.length && count < ${e}) {\n        const randomIndex = Math.floor(Math.random() * friend_link_list.length);\n        const { name, link, avatar } = friend_link_list.splice(randomIndex, 1)[0];\n  \n        finalLinkList.push({\n          name,\n          link,\n          avatar,\n        });\n        count++;\n      }\n  \n      let html = finalLinkList\n        .map(({ name, link }) => {\n          const returnInfo = "<a class='footer-item' href='" + link + "' target='_blank' rel='noopener nofollow'>" + name + "</a>"\n          return returnInfo;\n        })\n        .join("");\n  \n      html += "<a class='footer-item' href='/link/'>更多</a>";\n\n      document.getElementById("friend-links-in-footer").innerHTML = html;\n\n      setTimeout(()=>{\n        footerRandomFriendsBtn.style.opacity = "1";\n      }, 300)\n    };`),{path:t.path||"anzhiyu/random.js",data:s}}));