"use strict";function isTagRelated(t,e){let a=!1;return e.forEach((function(e){t===e.name&&(a=!0)})),a}function findItem(t,e,a){for(let i=0;i<t.length;i++)if(t[i][e]===a)return i;return-1}function compare(t){return function(e,a){const i=e[t];return a[t]-i}}hexo.extend.helper.register("related_posts",(function(t,e){let a=[];if(t.tags.forEach((function(i){e.forEach((function(e){if(isTagRelated(i.name,e.tags)){const i={title:e.title,path:e.path,cover:e.cover,randomcover:e.randomcover,weight:1,updated:e.updated,created:e.date},n=findItem(a,"path",e.path);-1!==n?a[n].weight+=1:t.path!==e.path&&a.push(i)}}))})),0===a.length)return"";let i="";const n=hexo.config,s=hexo.theme.config,r=s.related_post.limit||6,o=s.related_post.date_type||"created",c=this._p("post.recommend");if(a=a.sort(compare("weight")),a.length>0){i+='<div class="relatedPosts">',i+=`<div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>${c}</span></div>`,i+='<div class="relatedPosts-list">';for(let t=0;t<Math.min(a.length,r);t++){const e=!1===a[t].cover?a[t].randomcover:a[t].cover,s=this.escape_html(a[t].title);i+=`<div><a href="${this.url_for(a[t].path)}" title="${s}">`,i+=`<img class="cover" src="${this.url_for(e)}" alt="cover">`,i+="created"===o?`<div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> ${this.date(a[t].created,n.date_format)}</div>`:`<div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> ${this.date(a[t].updated,n.date_format)}</div>`,i+=`<div class="title">${s}</div>`,i+="</div></a></div>"}return i+="</div></div>",i}}));